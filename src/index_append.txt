                    handleGoogleConnect();
                });
            }
        });

        // Notion OAuth Status UI Helper Functions
        function showNotionOAuthStatus(state, message = '') {
            const statusContainer = document.getElementById('notion-oauth-status');
            const loadingDiv = document.getElementById('notion-loading');

            const errorDiv = document.getElementById('notion-error');
            const errorMessage = document.getElementById('notion-error-message');
            
            // Hide all states first
            loadingDiv.style.display = 'none';
            errorDiv.style.display = 'none';
            
            // Show the container
            statusContainer.style.display = 'block';
            
            // Show the appropriate state
            switch (state) {
                case 'loading':
                    loadingDiv.style.display = 'flex';
                    updateNotionButton('loading');
                    break;
                case 'success':
                    // Just hide the status container for success
                    statusContainer.style.display = 'none';
                    updateNotionButton('connected');
                    break;
                case 'error':
                    errorDiv.style.display = 'flex';
                    errorMessage.textContent = message || 'Connection failed';
                    updateNotionButton('error');
                    break;
            }
        }
        
        function hideNotionOAuthStatus() {
            const statusContainer = document.getElementById('notion-oauth-status');
            statusContainer.style.display = 'none';
        }
        
        function updateNotionButton(state) {
            const btn = document.getElementById('notion-connect');
            const text = document.getElementById('notion-text');
            
            console.log('[updateNotionButton] Setting state:', state);
            switch (state) {
                case 'loading':
                    btn.style.display = 'none';
                    console.log('[updateNotionButton] Hidden button for loading');
                    break;
                case 'connected':
                    btn.style.display = 'none';
                    console.log('[updateNotionButton] Hidden button for connected');
                    break;
                case 'error':
                    btn.style.display = 'block';
                    btn.disabled = false;
                    text.textContent = 'Connect Notion';
                    btn.style.background = '';
                    console.log('[updateNotionButton] Shown button for error');
                    break;
                default:
                    btn.style.display = 'block';
                    btn.disabled = false;
                    text.textContent = 'Connect Notion';
                    btn.style.background = '';
                    console.log('[updateNotionButton] Shown button for default');
            }
        }
        
        // Add Notion retry button functionality
        document.addEventListener('DOMContentLoaded', () => {
            const retryBtn = document.getElementById('notion-retry');
            if (retryBtn) {
                retryBtn.addEventListener('click', () => {
                    console.log('[Renderer] Notion retry button clicked');
                    hideNotionOAuthStatus();
                    handleNotionConnect();
                });
            }
        });

        // Initialize the app
        console.log('Synk app initialized with enhanced OAuth UI');
    </script>
</body>
</html>